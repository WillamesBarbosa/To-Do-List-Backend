# To-Do List Backend API

API RESTful para gerenciamento de tarefas (To-Do List), com autenticaÃ§Ã£o de usuÃ¡rios, controle de acesso por proprietÃ¡rio da tarefa e testes automatizados.

Este projeto foi desenvolvido com foco em **boas prÃ¡ticas de arquitetura backend**, **separaÃ§Ã£o de responsabilidades**, **seguranÃ§a** e **testabilidade**, servindo como um MVP funcional e escalÃ¡vel.

---

## ğŸ“Œ Features

- AutenticaÃ§Ã£o de usuÃ¡rios via JWT
- CRUD completo de tarefas
- RelaÃ§Ã£o **1:N** entre UsuÃ¡rio e Tasks
- Controle de acesso:
  - UsuÃ¡rio sÃ³ pode **listar, visualizar, atualizar e deletar** suas prÃ³prias tasks
- ValidaÃ§Ã£o de dados de entrada
- Tratamento centralizado de erros
- Testes unitÃ¡rios e de integraÃ§Ã£o
- Banco relacional com migrations versionadas

---

## ğŸ§  Regras de NegÃ³cio

- Cada **usuÃ¡rio pode ter vÃ¡rias tasks**
- Cada **task pertence a apenas um usuÃ¡rio**
- Tasks sÃ³ podem ser:
  - Atualizadas pelo usuÃ¡rio que as criou
  - Deletadas pelo usuÃ¡rio que as criou
- Caso a task nÃ£o exista **ou pertenÃ§a a outro usuÃ¡rio**, a API retorna `404`
- Tokens invÃ¡lidos ou ausentes retornam `401`

---

## ğŸ› ï¸ Tecnologias Utilizadas

- **Node.js**
- **Express**
- **Knex.js**
- **PostgreSQL** (produÃ§Ã£o/desenvolvimento)
- **SQLite (in-memory)** para testes
- **JWT (JSON Web Token)**
- **Jest** (testes unitÃ¡rios e de integraÃ§Ã£o)
- **Supertest**

---

## ğŸ“‚ Arquitetura do Projeto

src/
â”œâ”€â”€ app/
â”‚ â”œâ”€â”€ controllers/
â”‚ â”œâ”€â”€ services/
â”‚ â”œâ”€â”€ repositories/
â”‚ â”œâ”€â”€ middlewares/
â”‚ â”œâ”€â”€ utils/
â”‚ â”‚ â”œâ”€â”€ adapter/
â”‚ â”‚ â”œâ”€â”€ validators/
â”‚ â”‚ â””â”€â”€ helpers/
â”‚ â””â”€â”€ routes/
â”œâ”€â”€ database/
â”‚ â”œâ”€â”€ config/
â”‚ â””â”€â”€ migrations/
â”œâ”€â”€ routes
â”œâ”€â”€ index.js
tests/
â”œâ”€â”€ controllers/
â”œâ”€â”€ middlewares/
â”œâ”€â”€ services/
â””â”€â”€ utils/


Arquitetura baseada em **Controller â†’ Service â†’ Repository**, garantindo:
- Baixo acoplamento
- Alta testabilidade
- Facilidade de manutenÃ§Ã£o

---

## ğŸ” AutenticaÃ§Ã£o

A API utiliza **JWT** para autenticaÃ§Ã£o.

### Header esperado:

Authorization: Bearer <token>


Rotas protegidas exigem token vÃ¡lido.

---

## ğŸš€ Rotas Principais

### Auth
- `POST /login`

### Tasks
- `POST /task` â€“ cria uma task
- `GET /tasks` â€“ lista tasks do usuÃ¡rio autenticado
- `GET /task/:id` â€“ retorna uma task do usuÃ¡rio autenticado
- `PUT /task/:id` â€“ atualiza uma task do usuÃ¡rio autenticado
- `DELETE /task/:id` â€“ remove uma task do usuÃ¡rio autenticado

### Users
- `POST /user` â€“ cria um usuÃ¡rio
- `GET /users` â€“ lista todos os usuÃ¡rios
- `GET /user` â€“ retorna o usuÃ¡rio autenticado
- `PUT /user` â€“ atualiza os dados do usuÃ¡rio autenticado
- `DELETE /user` â€“ deleta o usuÃ¡rio

---

## ğŸ§ª Testes

O projeto possui testes **unitÃ¡rios e de integraÃ§Ã£o**, cobrindo:

- Services
- Controllers
- ValidaÃ§Ãµes
- Regras de autorizaÃ§Ã£o
- Fluxos de erro

### Rodar os testes:
```bash
npm run dev/unit - testes unitÃ¡rios
```

```bash
npm run dev/integration - testes de integraÃ§Ã£o
```

Os testes utilizam SQLite em memÃ³ria, garantindo isolamento total do banco de produÃ§Ã£o.

## ğŸ—„ï¸ Banco de Dados
### Relacionamento

users

tasks

user_id â†’ FK para users.id

### Migrations
```bash
npx knex migrate:latest
```

### Rollback:

```bash
npx knex migrate:rollback
```

## âš™ï¸ VariÃ¡veis de Ambiente

Crie um arquivo .env baseado no .env.example:
```env
#enviroment
NODE_ENV=development


#development
DB_HOST=
DB_PORT=
DB_USER=
DB_PASSWORD=
DB_NAME=

#passwords informations to incript
PASS_SALTS=
PASS_FIRSTTEXT=
PASS_SECONDTEXT=


#JWT CONFIGS
TOKEN_SECRET=
TOKEN_EXPIRATION=
```

## â–¶ï¸ Executando o Projeto
Instalar dependÃªncias
```bash
npm install
```

Rodar migrations
```bash
npx knex migrate:latest
```

Iniciar o servidor
```bash
npm run dev
```


Servidor disponÃ­vel em:

```bash
http://localhost:3000
```

## ğŸ“ˆ PrÃ³ximos Passos (Roadmap)

PaginaÃ§Ã£o de tasks

- Status de progresso da task
- Filtros por status
- Refresh token
- Soft delete
- Logs estruturados


## ğŸ‘¨â€ğŸ’» Autor

Willames Da Silva Barbosa
Backend Developer em formaÃ§Ã£o
Foco em Node.js, arquitetura limpa e testes automatizados.

## ğŸ“„ LicenÃ§a

Este projeto estÃ¡ sob a licenÃ§a MIT.